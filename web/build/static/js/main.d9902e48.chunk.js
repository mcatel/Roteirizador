(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{41:function(e,t,a){e.exports=a.p+"static/media/travolta-crunched.2ea66c06.gif"},44:function(e,t,a){e.exports=a(76)},49:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=a(7),i=(a(49),a(23)),u=a(5),s=a(12),m=a(18),d=a(13),p=a.n(d),b=a(21),f=a(39),E=a.n(f).a.create({baseURL:"https://roteirizador-mcatel.herokuapp.com/"}),g=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t&&t.length>0)){e.next=4;break}return e.next=4,E.post("routes",{coordinates:t.map((function(e){return{longitude:e.lat,latitude:e.lng}}))});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t,a){var n=new window.google.maps.DirectionsService,r=new window.google.maps.DirectionsRenderer;if(r.setMap(e),!(t.length<=1)){var c=t.map((function(e){return{location:e,stopover:!0}})),o=c.shift().location,l=c.pop().location;n.route({origin:o,destination:l,waypoints:c,travelMode:"DRIVING"},(function(e,t){if("OK"===t){r.setDirections(e);var n=e.routes[0].legs.reduce((function(e,t){return e+t.distance.value}),0),c=e.routes[0].legs.reduce((function(e,t){return e+t.duration.value}),0);a({distance:(n/1e3).toFixed(2),time:(c/3600).toFixed(2)})}else a({distance:null,time:null})}))}},h=a(16),j=a(24);a(68);var O=function(e){var t=e.coordinates,a=e.setCoordinates,n=e.label,c=e.name,o=e.index,l=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,e.next=3,Object(j.b)(r.description);case 3:return c=e.sent,e.next=6,Object(j.c)(c[0]);case 6:l=e.sent,a([].concat(Object(s.a)(t.slice(0,o)),[l],Object(s.a)(t.slice(o+1,t.length))));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"input-block"},r.a.createElement("label",{htmlFor:c},n),r.a.createElement(j.a,{minLengthAutocomplete:3,selectProps:{placeholder:"Informe uma parada",onChange:l,styles:{input:function(e){return Object(h.a)(Object(h.a)({},e),{},{height:"30px"})},control:function(e){return Object(h.a)(Object(h.a)({},e),{},{backgroundColor:"#E6E6F0",borderRadius:"8px"})},singleValue:function(e){return Object(h.a)(Object(h.a)({},e),{},{"-webkit-transform":null,transform:null})}}}}))};a(69);var w=function(e){var t=e.coordinates,a=e.setCoordinates,c=e.setRouteData,o=e.map,i=e.gmapsLoaded,u=Object(n.useState)([{name:"origem",label:"Origem"},{name:"parada",label:"Parada"}]),d=Object(l.a)(u,2),p=d[0],b=d[1];return i?r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t&&t.length>1?(g(t),v(o,t,c)):(a([]),v(o,[],c))},id:"form-container"},r.a.createElement("legend",null,"Rotas"),p.map((function(e,n){return r.a.createElement("div",{key:"".concat(e.name+n),className:"field-block"},r.a.createElement(O,{label:e.label,index:n,name:e.name+n,coordinates:t,setCoordinates:a}),n>1&&r.a.createElement("button",{type:"button",onClick:function(){return function(e){var n=p.filter((function(t,a){return a!==e}));a(t.filter((function(t,a){return e!==a}))),b(n)}(n)}},r.a.createElement(m.d,null)))})),r.a.createElement("section",null,r.a.createElement("button",{type:"submit",className:"button-router"},r.a.createElement(m.c,{className:"button-icon"}),"Roteirizar"),r.a.createElement("button",{type:"button",className:"button-add",onClick:function(){return e="parada",t="Parada",void b([].concat(Object(s.a)(p),[{name:e,label:t}]));var e,t}},r.a.createElement(m.b,null)))):r.a.createElement("p",null,"Mapa n\xe3o carregado")},x=a(40),k={position:"relative",width:"100%",height:"100%",borderRadius:"0.8rem",border:"1px solid var(--color-primary)"},y=function(e){var t=e.setMap,a=e.center;return e.gmapsLoaded?r.a.createElement(x.a,{mapContainerStyle:k,zoom:8,center:a,onLoad:function(e){t(e)}}):r.a.createElement("p",null,"Mapa n\xe3o carregado")},S=(a(70),function(e){var t=e.gmapsLoaded,a=Object(n.useState)({lat:-14.94478488,lng:-50.00976563}),c=Object(l.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(null),s=Object(l.a)(u,2),m=s[0],d=s[1],p=Object(n.useState)([]),b=Object(l.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)({}),v=Object(l.a)(g,2),h=v[0],j=v[1];return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;i({lat:a,lng:n})}),(function(){i({lat:-14.94478488,lng:-50.00976563})}),{timeout:3e4})}),[]),r.a.createElement("div",{id:"router-container"},r.a.createElement("header",null,r.a.createElement(w,{coordinates:f,setCoordinates:E,routeData:h,map:m,setRouteData:j,center:o,gmapsLoaded:t}),(h.distance||h.time)&&r.a.createElement("footer",null,h.distance&&r.a.createElement("p",null,"Dist\xe2ncia:"," ",h.distance," ","Km"),h.time&&r.a.createElement("p",null,"Tempo estimado:"," ",h.time," ","Horas"))),r.a.createElement("main",null,r.a.createElement(y,{center:o,setMap:d,gmapsLoaded:t})))}),L=a(41),C=a.n(L);a(71);var D=function(){return r.a.createElement("div",{id:"not-found-container"},r.a.createElement("main",null,r.a.createElement("strong",null," 404 "),r.a.createElement("p",null," P\xe1gina n\xe3o encontrada "),r.a.createElement(i.b,{className:"back",to:"/"},r.a.createElement(m.a,{className:"back-icon"}),"Voltar")),r.a.createElement("footer",null,r.a.createElement("img",{src:C.a,alt:"P\xe1gina n\xe3o encontrada"})))},M=function(e){var t=e.gmapsLoaded;return r.a.createElement(i.a,{basename:"/Roteirizador"},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/router",exact:!0},r.a.createElement(S,{gmapsLoaded:t})),r.a.createElement(u.b,{path:"/404",exact:!0,component:D}),r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(u.a,{to:"/router"})),r.a.createElement(u.a,{to:"/404"})))},R=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=function(){c(!0)};return Object(n.useEffect)((function(){window.initMap=o;var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyA1SNsuYhUKvjlcWdt3hFaGgiMJDSqYzs0","&libraries=places&callback=initMap"),document.querySelector("body").insertAdjacentElement("beforeend",e)}),[]),r.a.createElement(M,{gmapsLoaded:a})};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.d9902e48.chunk.js.map